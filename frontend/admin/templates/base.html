<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Receptionist Panel{% endblock %}</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#2c3e50',
                        secondary: '#3498db',
                        accent: '#e74c3c',
                        light: '#ecf0f1',
                        dark: '#2c3e50',
                        success: '#2ecc71',
                        warning: '#f39c12',
                        info: '#17a2b8',
                    }
                }
            }
        }
    </script>
    <style>
        .status {
            padding: 0.3rem 0.6rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
        }

        .status.waiting {
            background-color: #ffe6cc;
            color: #ff9933;
        }

        .status.checked-in {
            background-color: #e6f7ee;
            color: #00b33c;
        }

        .status.checked-out {
            background-color: #e6e6e6;
            color: #666;
        }

        /* Custom styles for sidebar */
        .sidebar {
            transition: all 0.3s ease;
        }

        @media (max-width: 1023px) {
            .sidebar {
                transform: translateX(-100%);
                position: fixed;
                z-index: 40;
                top: 0;
                left: 0;
            }

            .sidebar.active {
                transform: translateX(0);
            }

            .overlay {
                display: none;
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background-color: rgba(0, 0, 0, 0.5);
                z-index: 30;
            }

            .overlay.active {
                display: block;
            }
        }

        /* Modal styles */
        .modal {
            transition: opacity 0.3s ease, transform 0.3s ease;
            transform: scale(0.9);
            opacity: 0;
        }

        .modal.active {
            transform: scale(1);
            opacity: 1;
        }

        /* Animation for notifications */
        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }

            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        /* Custom scrollbar */
        .custom-scrollbar::-webkit-scrollbar {
            width: 6px;
        }

        .custom-scrollbar::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }

        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: #c5c5c5;
            border-radius: 10px;
        }

        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background: #a8a8a8;
        }
    </style>
    {% block extra_css %}{% endblock %}
</head>

<body class="bg-[#f5f7fa] min-h-screen flex flex-col" style="margin-bottom: 55px;">
    <!-- Header -->
    <header class="bg-gradient-to-r from-primary to-secondary text-white p-4 shadow-md sticky top-0 z-50">
        <div class="container mx-auto flex justify-between items-center">
            <div class="flex items-center space-x-4">
                <button id="menu-toggle" class="lg:hidden text-white focus:outline-none">
                    <i class="fas fa-bars text-xl"></i>
                </button>
                <div class="flex items-center space-x-2">
                    <i class="fas fa-concierge-bell text-2xl"></i>
                    <h1 class="text-xl font-semibold">Reception Admin Panel</h1>
                </div>
            </div>

            <div class="flex items-center space-x-4">
                <div class="flex items-center space-x-2">
                    <!-- Initials circle -->
                    <div class="w-10 h-10 rounded-full bg-accent flex items-center justify-center text-white font-bold">
                        {{ current_user.username[0]|upper }}{{ current_user.username.split(' ')[1][0]|upper if
                        current_user.username.split(' ')|length > 1 else '' }}
                    </div>
                    <div class="hidden sm:block">
                        {{ current_user.username }}
                        <span class="status checked-in">Online</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Overlay for mobile sidebar -->
    <div id="overlay" class="overlay"></div>

    <div class="flex flex-1">
        <!-- Sidebar -->
        <aside id="sidebar"
            class="sidebar bg-white w-64 p-4 shadow-sm h-full fixed lg:sticky lg:top-20 lg:translate-x-0 z-40"
            style="height: 81vh;">
            <div class="flex justify-between items-center mb-6 lg:hidden">
                <h2 class="text-lg font-semibold text-dark">Menu</h2>
                <button id="close-menu" class="text-dark hover:text-secondary">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <ul class="space-y-2" style="height: 400px;">
                <!-- Dashboard -->
                <li>
                    <a href="/admin/dashboard"
                        class="flex items-center p-3 rounded-lg 
               {% if request.url.path == '/admin/dashboard' %}bg-secondary text-white{% else %}text-dark hover:bg-secondary hover:text-white{% endif %}">
                        <i class="fas fa-home w-5 text-center mr-2"></i> Dashboard
                    </a>
                </li>

                <!-- Visitors -->
                <li>
                    <a href="/admin/visitors/all"
                        class="flex items-center p-3 rounded-lg 
               {% if request.url.path.startswith('/admin/visitors/all') %}bg-secondary text-white{% else %}text-dark hover:bg-secondary hover:text-white{% endif %}">
                        <i class="fas fa-users w-5 text-center mr-2"></i> Visitors
                    </a>
                </li>


                <li>
                    <a href="/admin/visitors/future-visitor"
                        class="flex items-center p-3 rounded-lg 
       {% if '/admin/visitors/future-visitor' in request.url.path %}bg-secondary text-white{% else %}text-dark hover:bg-secondary hover:text-white{% endif %}">
                        <i class="fas fa-users w-5 text-center mr-2"></i> Appointments
                    </a>
                </li>

                <!-- Employee Management -->
                <li>
                    <a href="/admin/employees"
                        class="flex items-center p-3 rounded-lg 
       {% if request.url.path == '/admin/employees' %}bg-secondary text-white{% else %}text-dark hover:bg-secondary hover:text-white{% endif %}">
                        <i class="fas fa-user-tie w-5 text-center mr-2"></i> Employees
                    </a>
                </li>

                <!-- Employee Edit -->
                <li>
                    <a href="/admin/employees/edit"
                        class="flex items-center p-3 rounded-lg 
       {% if request.url.path.startswith('/admin/employees/') and 'edit' in request.url.path %}bg-secondary text-white{% else %}text-dark hover:bg-secondary hover:text-white{% endif %}">
                        <i class="fas fa-user-edit w-5 text-center mr-2"></i> Edit Employee
                    </a>
                </li>

                <!-- User Management -->
                <li>
                    <a href="/admin/users"
                        class="flex items-center p-3 rounded-lg 
       {% if request.url.path == '/admin/users' %}bg-secondary text-white{% else %}text-dark hover:bg-secondary hover:text-white{% endif %}">
                        <i class="fas fa-user-cog w-5 text-center mr-2"></i> User Management
                    </a>
                </li>

                <!-- Logout -->
                <li class="pt-4 border-t border-gray-200">
                    <a href="/logout"
                        class="flex items-center p-3 rounded-lg text-dark hover:bg-secondary hover:text-white">
                        <i class="fas fa-sign-out-alt w-5 text-center mr-2"></i> Logout
                    </a>
                </li>
            </ul>
        </aside>

        <!-- Main Content -->
        <main class="flex-1 p-4 lg:ml-0">
            <div class="container mx-auto">
                {% block content %}{% endblock %}
            </div>
        </main>
    </div>

    <!-- Footer -->
    <footer class="bg-dark text-white text-center p-4 fixed bottom-0 left-0 w-full">
        <p>Â© 2025 Receptionist Panel | Designed for ODH Corporation</p>
    </footer>

    <script>
        // Toggle mobile menu
        document.getElementById('menu-toggle').addEventListener('click', function () {
            document.getElementById('sidebar').classList.add('active');
            document.getElementById('overlay').classList.add('active');
        });

        document.getElementById('close-menu').addEventListener('click', function () {
            document.getElementById('sidebar').classList.remove('active');
            document.getElementById('overlay').classList.remove('active');
        });

        document.getElementById('overlay').addEventListener('click', function () {
            document.getElementById('sidebar').classList.remove('active');
            this.classList.remove('active');
        });

        // Update date and time
        function updateDateTime() {
            const now = new Date();
            const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
            const dateEl = document.getElementById('current-date');
            const timeEl = document.getElementById('current-time');
            if (dateEl) dateEl.textContent = now.toLocaleDateString('en-US', options);
            if (timeEl) timeEl.textContent = now.toLocaleTimeString('en-US');
        }

        updateDateTime();
        setInterval(updateDateTime, 1000);
    </script>

    {% block extra_js %}{% endblock %}
</body>

</html>